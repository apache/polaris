%% Licensed to the Apache Software Foundation (ASF) under one
%% or more contributor license agreements.  See the NOTICE file
%% distributed with this work for additional information
%% regarding copyright ownership.  The ASF licenses this file
%% to you under the Apache License, Version 2.0 (the
%% "License"); you may not use this file except in compliance
%% with the License.  You may obtain a copy of the License at
%%
%%   http://www.apache.org/licenses/LICENSE-2.0
%%
%% Unless required by applicable law or agreed to in writing,
%% software distributed under the License is distributed on an
%% "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
%% KIND, either express or implied.  See the License for the
%% specific language governing permissions and limitations
%% under the License.

flowchart TD
    B["ðŸ¤– GitHub Workflow<br/>ðŸ”§ Manual trigger from release manager<br/><br/>â€¢ Create a new branch from the Git SHA<br/>â€¢ Push the branch to the remote repository"]

    B --> C["ðŸ‘¤ Release Manager<br/><br/>â€¢ Cherry pick the commits from main branch to release branch<br/>â€¢ Ensure that the changelog is up to date<br/>â€¢ Create a pull request to add the commits<br/>â€¢ Get the pull request approved and merged"]

    C --> D["ðŸ¤– GitHub Workflow<br/>ðŸ”§ Manual trigger from release manager<br/><br/>â€¢ Verify that all Github checks are passing<br/>â€¢ Update the project version files<br/>â€¢ Finalize the changelog for the release<br/>â€¢ Commit the changes to release branch<br/>â€¢ Create the RC tag<br/>â€¢ Push the branch and the tag"]

    D --> E["ðŸ¤– GitHub Workflow<br/>ðŸ”§ Manual trigger from release manager<br/>â€¢ Build the source and binary artifacts<br/>â€¢ Stage artifacts to dist dev repository<br/>â€¢ Publish artifacts to Nexus staging repository<br/>â€¢ Close Nexus staging repository<br/>â€¢ Build Docker images for server and admin tool<br/>â€¢ Build the Helm chart<br/>â€¢ Create signature and checksum for Helm package files<br/>â€¢ Copy package files to dist dev repository"]

    E --> H["ðŸ‘¤ Release Manager<br/><br/>â€¢ Start vote thread on dev mailing list<br/>â€¢ Wait for the vote to pass<br/>â€¢ Start vote thread on incubator mailing list<br/>â€¢ Wait for the vote to pass"]

    H --> I["ðŸ¤– GitHub Workflow<br/>ðŸ”§ Manual trigger from release manager<br/><br/>â€¢ Copy distribution from dist dev to dist release space<br/>â€¢ Create a final release tag to Git repository<br/>â€¢ Create the GitHub release<br/>â€¢ Publish Docker images to DockerHub<br/>â€¢ Release the candidate repository on Nexus"]

    I --> J["ðŸ‘¤ Release Manager<br/><br/>â€¢ Update documentation - TBD - Process yet to be determined"]

    I --> K["ðŸ‘¤ Release Manager<br/><br/>â€¢ Send announcement e-mail to dev mailing list<br/>â€¢ Send announcement to announce Apache mailing list"]

    %% Class definition for left-aligned text
    classDef leftAlign text-align:left;

    %% Apply left-align class to all nodes
    class B,C,D,E,H,I,J,K leftAlign;
