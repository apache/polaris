---
#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
title: Configuring Polaris
type: docs
weight: 550
---

## Overview

This page provides information on how to configure Apache Polaris. Unless stated
otherwise, this information is valid both for Polaris Docker images (and Kubernetes deployments) as
well as for Polaris binary distributions.

{{< alert note >}}
For Production tips and best practices, refer to [Configuring Polaris for Production]({{% ref "configuring-polaris-for-production.md" %}}).
{{< /alert >}}

First off, Polaris server runs on Quarkus, and uses its configuration mechanisms. Read Quarkus
[configuration guide](https://quarkus.io/guides/config) to get familiar with the basics.

Quarkus aggregates configuration properties from multiple sources, applying them in a specific order
of precedence. When a property is defined in multiple sources, the value from the source with the
higher priority overrides those from lower-priority sources.

The sources are listed below, from highest to lowest priority:

1. System properties: properties set via the Java command line using `-Dproperty.name=value`.
2. Environment variables (see below for important details).
3. Settings in `$PWD/config/application.properties` file.
4. The `application.properties` files packaged in Polaris.
5. Default values: hardcoded defaults within the application.

When using environment variables, there are two naming conventions:

1. If possible, just use the property name as the environment variable name. This works fine in most
   cases, e.g. in Kubernetes deployments. For example, `polaris.realm-context.realms` can be
   included as is in a container YAML definition:
   ```yaml
   env:
   - name: "polaris.realm-context.realms"
     value: "realm1,realm2"
   ```

2. If running from a script or shell prompt, however, stricter naming rules apply: variable names
   can consist solely of uppercase letters, digits, and the `_` (underscore) sign. In such
   situations, the environment variable name must be derived from the property name, by using
   uppercase letters, and replacing all dots, dashes and quotes by underscores. For example,
   `polaris.realm-context.realms` becomes `POLARIS_REALM_CONTEXT_REALMS`. See
   [here](https://smallrye.io/smallrye-config/Main/config/environment-variables/) for more details.

{{< alert important >}}
While convenient, uppercase-only environment variables can be problematic for complex property
names. In these situations, it's preferable to use system properties or a configuration file.
{{< /alert >}}


As stated above, a configuration file can also be provided at runtime; it should be available
(mounted) at `$PWD/config/application.properties` for Polaris server to recognize it. In Polaris
official Docker images, this location is `/deployment/config/application.properties`.

For Kubernetes deployments, the configuration file is typically defined as a `ConfigMap`, then
mounted in the container at `/deployment/config/application.properties`. It can be mounted in
read-only mode, as Polaris only reads the configuration file once, at startup.

## Polaris Configuration Options Reference

| Configuration Property                                                                 | Default Value                       | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|----------------------------------------------------------------------------------------|-------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `polaris.persistence.type`                                                             | `relational-jdbc`                   | Define the persistence backend used by Polaris (`in-memory`, `relational-jdbc`). See [Configuring Apache Polaris for Production)[{{% ref "configuring-polaris-for-production.md" %}})                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `polaris.persistence.relational.jdbc.max-retries`                                      | `1`                                 | Total number of retries JDBC persistence will attempt on connection resets or serialization failures before giving up.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.persistence.relational.jdbc.max_duaration_in_ms`                              | `5000 ms`                           | Max time interval (ms) since the start of a transaction when retries can be attempted.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.persistence.relational.jdbc.initial_delay_in_ms`                              | `100 ms`                            | Initial delay before retrying. The delay is doubled after each retry.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `polaris.realm-context.type`                                                           | `default`                           | Define the type of the Polaris realm to use.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `polaris.realm-context.realms`                                                         | `POLARIS`                           | Define the list of realms to use.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `polaris.realm-context.header-name`                                                    | `Polaris-Realm`                     | Define the header name defining the realm context.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `polaris.features."ENFORCE_PRINCIPAL_CREDENTIAL_ROTATION_REQUIRED_CHECKING"`           | `false`                             | If set to true, require that principals must rotate their credentials before being used for anything else.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `polaris.features."SKIP_CREDENTIAL_SUBSCOPING_INDIRECTION"`                            | `false`                             | If set to true, skip credential-subscoping indirection entirely whenever trying to obtain storage credentials for instantiating a FileIO. If 'true', no attempt is made to use StorageConfigs to generate table-specific storage credentials, but instead the default fallthrough of table-level credential properties or else provider-specific APPLICATION_DEFAULT credential-loading will be used for the FileIO. Typically this setting is used in single-tenant server deployments that don't rely on "credential-vending" and can use server-default environment variables or credential config files for all storage access, or in test/dev scenarios. |
| `polaris.features."ALLOW_SETTING_S3_ENDPOINTS"`                                        | `true`                              | If set to true (default), Polaris will permit S3 storage configurations to have custom endpoints. If set to false, Polaris will not accept catalog create and update requests that contain S3 endpoint properties.                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `polaris.features."ALLOW_TABLE_LOCATION_OVERLAP"`                                      | `false`                             | If set to true, allow one table's location to reside within another table's location. Enforced within a given namespace only. See [Storage Location Policies](#storage-location-policies).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `polaris.features."ALLOW_NAMESPACE_LOCATION_OVERLAP"`                                  | `false`                             | If set to true, allow one namespace's location to reside within another namespace's location. Enforced within a parent catalog or namespace only. See [Storage Location Policies](#storage-location-policies).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `polaris.features."ALLOW_EXTERNAL_METADATA_FILE_LOCATION"`                             | `false`                             | If set to true, allows Iceberg metadata files to be located outside the table's base location directory. See [Storage Location Policies](#storage-location-policies).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `polaris.features."ALLOW_OVERLAPPING_CATALOG_URLS"`                                    | `false`                             | If set to true, allows multiple catalogs to share base URL prefixes. See [Storage Location Policies](#storage-location-policies).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `polaris.features."ALLOW_UNSTRUCTURED_TABLE_LOCATION"`                                 | `false`                             | If set to true, allows tables to be placed at any location within the catalog's allowed storage locations, regardless of the namespace hierarchy. See [Storage Location Policies](#storage-location-policies).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `polaris.features."ALLOW_EXTERNAL_TABLE_LOCATION"`                                     | `false`                             | If set to true, bypasses the check that Iceberg metadata files must reside within the table's base location directory (same effect as `ALLOW_EXTERNAL_METADATA_FILE_LOCATION`). Does not affect catalog allowed-location prefix enforcement. See [Storage Location Policies](#storage-location-policies).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `polaris.features."ALLOW_EXTERNAL_CATALOG_CREDENTIAL_VENDING"`                         | `true`                              | If set to true, allow credential vending for external catalogs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `polaris.features."ALLOW_WILDCARD_LOCATION"`                                           | `false`                             | Indicates whether asterisks ('*') in configuration values defining allowed storage locations are processed as meaning 'any location'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `polaris.features."SUPPORTED_CATALOG_STORAGE_TYPES"`                                   | `S3`, `AZURE`, `GCS`                | The list of supported storage types for a catalog.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `polaris.features."CLEANUP_ON_NAMESPACE_DROP"`                                         | `false`                             | If set to true, clean up data when a namespace is dropped.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `polaris.features."CLEANUP_ON_CATALOG_DROP"`                                           | `false`                             | If set to true, clean up data when a catalog is dropped.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.features."DROP_WITH_PURGE_ENABLED"`                                           | `false`                             | If set to true, allows tables to be dropped with the purge parameter set to true.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `polaris.features."PURGE_VIEW_METADATA_ON_DROP"`                                       | `true`                              | If set to true, Polaris will attempt to delete view metadata files when a view is dropped.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `polaris.features."POLARIS_TASK_TIMEOUT_MILLIS"`                                       | `300000`                            | Polaris task expiry timeout (milliseconds). Older unfinished tasks may not be processed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `polaris.features."STORAGE_CREDENTIAL_DURATION_SECONDS"`                               | `3600`                              | The duration of time that vended storage credentials are valid for. Support for longer (or shorter) durations is dependent on the storage provider. GCS current does not respect this value.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `polaris.features."STORAGE_CREDENTIAL_CACHE_DURATION_SECONDS"`                         | `1800`                              | How long to store storage credentials in the local cache. This should be less than STORAGE_CREDENTIAL_DURATION_SECONDS.key().                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `polaris.features."MAX_METADATA_REFRESH_RETRIES"`                                      | `2`                                 | How many times to retry refreshing metadata when the previous error was retryable.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `polaris.features."LIST_PAGINATION_ENABLED"`                                           | `false`                             | If set to true, pagination for APIs like listTables is enabled.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `polaris.features."ENABLE_GENERIC_TABLES"`                                             | `true`                              | If true, the generic-tables endpoints are enabled.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `polaris.features."ENTITY_CACHE_WEIGHER_TARGET"`                                       | `104857600`                         | The maximum weight for the entity cache. This is a heuristic value without any particular unit of measurement. It roughly correlates with the total heap size of cached values. Fine-tuning requires experimentation in the specific deployment environment.                                                                                                                                                                                                                                                                                                                                                                                                  |
| `polaris.features."ENABLE_CATALOG_FEDERATION"`                                         | `false`                             | If true, allows creating and using ExternalCatalogs containing ConnectionConfigInfos to perform federation to remote catalogs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `polaris.features."ENABLE_SUB_CATALOG_RBAC_FOR_FEDERATED_CATALOGS"`                    | `false`                             | When enabled, allows RBAC operations to create synthetic entities for entities in federated catalogs that don't exist in the local metastore.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `polaris.features."ENABLE_POLICY_STORE"`                                               | `true`                              | If true, the policy-store endpoints are enabled.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `polaris.features."SUPPORTED_CATALOG_CONNECTION_TYPES"`                                | `ICEBERG_REST`                      | The list of supported catalog connection types for federation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `polaris.features."SUPPORTED_EXTERNAL_CATALOG_AUTHENTICATION_TYPES"`                   | `OAUTH`, `BEARER`, `SIGV4`          | The list of supported authentication types for catalog federation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `polaris.features."ICEBERG_COMMIT_MAX_RETRIES"`                                        | `4`                                 | The max number of times to try committing to an Iceberg table.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `polaris.features."ALLOW_SPECIFYING_FILE_IO_IMPL"`                                     | `false`                             | Config key for whether to allow setting the FILE_IO_IMPL using catalog properties. Must only be enabled in dev/test environments, should not be in production systems.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.features."ALLOW_INSECURE_STORAGE_TYPES"`                                      | `false`                             | Allow usage of FileIO implementations that are considered insecure. Enabling this setting may expose the service to possibly severe security risks! This should only be set to 'true' for tests!                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `polaris.features."ICEBERG_ROLLBACK_COMPACTION_ON_CONFLICTS"`                          | `false`                             | Rollback replace snapshots created by compaction which have polaris.internal.conflict-resolution.by-operation-type.replace property set to rollback in their snapshot summary.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `polaris.features."ADD_TRAILING_SLASH_TO_LOCATION"`                                    | `true`                              | When set, the base location for a table or namespace will have `/` added as a suffix if not present.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `polaris.features."ALLOW_OPTIMIZED_SIBLING_CHECK"`                                     | `false`                             | Server-level gate that must be set to true before `OPTIMIZED_SIBLING_CHECK` can be enabled. Exists to prevent accidental enablement in deployments where the location index has not been fully populated, such as after a schema migration without a data backfill. Will be removed in 2.0.0 when Polaris ships with the necessary migrations to backfill the index. See [Storage Location Policies](#storage-location-policies).                                                                                                                                                                                                                                                                                     |
| `polaris.features."OPTIMIZED_SIBLING_CHECK"`                                           | `false`                             | When set, an index is used to perform the location overlap check between tables, views, and namespaces instead of a full sibling scan. Requires `ALLOW_OPTIMIZED_SIBLING_CHECK` to be enabled at the server level. Only supported by the JDBC (relational) metastore. See [Storage Location Policies](#storage-location-policies).                                                                                                                                                                                         |
| `polaris.features."DEFAULT_LOCATION_OBJECT_STORAGE_PREFIX_ENABLED"`                    | `false`                             | When enabled, Iceberg tables and views created without an explicit location will have a hashed prefix applied within the catalog's base location, rather than being placed directly under the parent namespace path. Requires `ALLOW_UNSTRUCTURED_TABLE_LOCATION` to be enabled. See [Storage Location Policies](#storage-location-policies) for valid configuration combinations.                                                                                                                                                                                                                                                |
| `polaris.features."ENABLE_CREDENTIAL_RESET"`                                           | `true`                              | Flag to enable or disable the API to reset principal credentials. Defaults to enabled, but service providers may want to disable it.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `polaris.features."ALLOW_SETTING_SUB_CATALOG_RBAC_FOR_FEDERATED_CATALOGS"`             | `true`                              | If set to true (default), Polaris will allow setting or changing catalog property polaris.config.enable-sub-catalog-rbac-for-federated-catalogs.If set to false, Polaris will disallow setting or changing the above catalog property.                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.features."ALLOW_DROPPING_NON_EMPTY_PASSTHROUGH_FACADE_CATALOG"`               | `false`                             | If enabled, allow dropping a passthrough-facade catalog even if it contains namespaces or tables. passthrough-facade catalogs may contain leftover entities when syncing with source catalog.In the short term these entities will be ignored, in the long term there will be method/background job to clean them up.                                                                                                                                                                                                                                                                                                                                         |
| `polaris.features."ENABLE_FINE_GRAINED_UPDATE_TABLE_PRIVILEGES"`                       | `true`                              | When true, enables finer grained update table privileges which are passed to the authorizer for update table operations.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `polaris.features."ALLOW_FEDERATED_CATALOGS_CREDENTIAL_VENDING"`                       | `true`                              | If set to true (default), allow credential vending for external catalogs. Note this requires ALLOW_EXTERNAL_CATALOG_CREDENTIAL_VENDING to be true first.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `polaris.features."AZURE_TIMEOUT_MILLIS"`                                              | `15000`                             | Timeout in milliseconds for Azure API requests. Prevents indefinite blocking when Azure endpoints are slow or unresponsive. Used internally by Azure storage integration for credential vending and other operations.                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `polaris.features."AZURE_RETRY_COUNT"`                                                 | `3`                                 | Number of retry attempts for Azure API requests. Uses exponential backoff with jitter to handle transient failures.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `polaris.features."AZURE_RETRY_DELAY_MILLIS"`                                          | `2000`                              | Initial delay in milliseconds before first retry for Azure API requests. Delay doubles with each retry (exponential backoff).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `polaris.features."AZURE_RETRY_JITTER_FACTOR"`                                         | `0.5`                               | Jitter factor (0.0 to 1.0) applied to retry delays for Azure API requests. The jitter is applied as a random percentage of the computed exponential backoff delay. For example, 0.5 means up to 50%% random jitter will be added to each retry delay. Helps prevent thundering herd when multiple requests fail simultaneously.                                                                                                                                                                                                                                                                                                                               |
| `polaris.features."TABLE_METADATA_CLEANUP_BATCH_SIZE"`                                 | `10`                                | Metadata batch size for tasks that clean up dropped tables' files.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `polaris.features.realm-overrides."my-realm"."SKIP_CREDENTIAL_SUBSCOPING_INDIRECTION"` | `true`                              | "Override" realm features, here the skip credential subscoping indirection flag.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `polaris.features."VALIDATE_VIEW_LOCATION_OVERLAP"`                                    | `true`                              | If true, view locations are included in the location overlap check on creation, in addition to tables and namespaces. See [Storage Location Policies](#storage-location-policies).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `polaris.features."STORAGE_CONFIGURATION_MAX_LOCATIONS"`                               | `-1`                                | How many locations can be associated with a storage configuration, or -1 for unlimited locations.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `polaris.features."ENTITY_CACHE_SOFT_VALUES"`                                          | `false`                             | Whether or not to use soft values in the entity cache.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.features."TABLE_OPERATIONS_MAKE_METADATA_CURRENT_ON_COMMIT"`                  | `true`                              | If true, BasePolarisTableOperations should mark the metadata that is passed into `commit` as current, and reuse it to skip a trip to object storage to re-construct the committed metadata again.                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `polaris.features."ALLOW_NAMESPACE_CUSTOM_LOCATION"`                                   | `false`                             | If set to true, allows namespaces to be created with completely arbitrary locations, without restriction to the catalog's base location or allowed storage prefixes. Does not affect credential vending. See [Storage Location Policies](#storage-location-policies).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `polaris.features."SCHEMA_VERSION_FALL_BACK_ON_DNE"`                                   | `true`                              | If set to true, exceptions encountered while loading the VERSION table which appear to be caused by the VERSION table not existing will be interpreted as meaning that the schema version is currently 0.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `polaris.authentication.type`                                                          | `internal`                          | The type of authentication to use. Three built-in types are supported: `internal`, `external`, and `mixed`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `polaris.authentication.authenticator.type`                                            | `default`                           | Define the Polaris authenticator type.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.authentication.token-service.type`                                            | `default`                           | Define the Polaris token service type.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.authentication.token-broker.type`                                             | `rsa-key-pair`                      | Define the Polaris token broker type. Also configure the location of the key files. For RSA: if the locations of the key files are not configured, an ephemeral key-pair will be created on each Polaris server instance startup, which breaks existing tokens after server restarts and is also incompatible with running multiple Polaris server instances.                                                                                                                                                                                                                                                                                                 |
| `polaris.authentication.token-broker.max-token-generation`                             | `PT1H`                              | Define the max token generation policy on the token broker.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `polaris.authentication.token-broker.rsa-key-pair.private-key-file`                    |                                     | Define the location of the RSA-256 private key file, if present the `public-key` file must be specified, too.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `polaris.authentication.token-broker.rsa-key-pair.public-key-file`                     |                                     | Define the location of the RSA-256 public key file, if present the `private-key` file must be specified, too.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `polaris.authentication.token-broker.symmetric-key.secret`                             | `secret`                            | Define the secret of the symmetric key.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `polaris.authentication.token-broker.symmetric-key.file`                               | `/tmp/symmetric.key`                | Define the location of the symmetric key file.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `polaris.oidc.principal-mapper.type`                                                   | `default`                           | Define the PrincipalMapper implementation. `default` extracts fields from claim paths.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.oidc.principal-mapper.id-claim-path`                                          |                                     | Define the path to the claim containing the principal ID.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `polaris.oidc.principal-mapper.name-claim-path`                                        |                                     | Define the path to the claim containing the principal name.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `polaris.oidc.principal-roles-mapper.type`                                             | `default`                           | Define the PrincipalRolesMapper implementation. `default` applies regex transformations.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `polaris.oidc.principal-roles-mapper.filter`                                           |                                     | Define the regex to filter roles from the OIDC token.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `polaris.oidc.principal-roles-mapper.mappings[n].regex`                                |                                     | Define the regex to match a role for transformation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `polaris.oidc.principal-roles-mapper.mappings[n].replacement`                          |                                     | Define the replacement string for the matched role.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `polaris.oidc.<tenant-id>.<property>=<value>`                                          |                                     | Define a per-tenant override for OIDC settings. Replace `<tenant-id>` with the tenant name, `<property>` with the property name and `<value>` with the property value.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.storage.aws.access-key`                                                       | `accessKey`                         | Define the AWS S3 access key. If unset, the default credential provider chain will be used.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `polaris.storage.aws.secret-key`                                                       | `secretKey`                         | Define the AWS S3 secret key. If unset, the default credential provider chain will be used.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `polaris.storage.gcp.token`                                                            | `token`                             | Define the Google Cloud Storage token. If unset, the default credential provider chain will be used.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `polaris.storage.gcp.lifespan`                                                         | `PT1H`                              | Define the Google Cloud Storage lifespan type. If unset, the default credential provider chain will be used.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `polaris.log.request-id-header-name`                                                   | `X-Request-ID`                      | Define the header name to match request ID in the log.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.log.mdc.aid`                                                                  | `polaris`                           | Define the log context (e.g. MDC) AID.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.log.mdc.sid`                                                                  | `polaris-service`                   | Define the log context (e.g. MDC) SID.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `polaris.rate-limiter.filter.type`                                                     | `no-op`                             | Define the Polaris rate limiter. Supported values are `no-op`, `token-bucket`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `polaris.rate-limiter.token-bucket.type`                                               | `default`                           | Define the token bucket rate limiter.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `polaris.rate-limiter.token-bucket.requests-per-second`                                | `9999`                              | Define the number of requests per second for the token bucket rate limiter.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `polaris.metrics.tags.<tag-name>=<tag-value>`                                          | `application=Polaris`               | Define arbitrary metric tags to include in every request.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `polaris.metrics.realm-id-tag.api-metrics-enabled`                                     | `false`                             | Whether to enable the `realm_id` metric tag in API metrics.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `polaris.metrics.realm-id-tag.http-metrics-enabled`                                    | `false`                             | Whether to enable the `realm_id` metric tag in HTTP request metrics.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `polaris.metrics.realm-id-tag.http-metrics-max-cardinality`                            | `100`                               | The maximum cardinality for the `realm_id` tag in HTTP request metrics.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `polaris.tasks.max-concurrent-tasks`                                                   | `100`                               | Define the max number of concurrent tasks.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `polaris.tasks.max-queued-tasks`                                                       | `1000`                              | Define the max number of tasks in queue.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `polaris.config.rollback.compaction.on-conflicts.enabled`                              | `false`                             | When set to true Polaris will apply the deconfliction by rollbacking those REPLACE operations snapshots which have the property of `polaris.internal.rollback.compaction.on-conflict` in their snapshot summary set to `rollback`, to resolve conflicts at the server end.                                                                                                                                                                                                                                                                                                                                                                                    |
| `polaris.event-listener.type`                                                          | `no-op`                             | Define the Polaris event listener type. Supported values are `no-op`, `aws-cloudwatch`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `polaris.event-listener.aws-cloudwatch.log-group`                                      | `polaris-cloudwatch-default-group`  | Define the AWS CloudWatch log group name for the event listener.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `polaris.event-listener.aws-cloudwatch.log-stream`                                     | `polaris-cloudwatch-default-stream` | Define the AWS CloudWatch log stream name for the event listener. Ensure that Polaris' IAM credentials have the following actions: "PutLogEvents", "DescribeLogStreams", and "DescribeLogGroups" on the specified log stream/group. If the specified log stream/group does not exist, then "CreateLogStream" and "CreateLogGroup" will also be required.                                                                                                                                                                                                                                                                                                      |
| `polaris.event-listener.aws-cloudwatch.region`                                         | `us-east-1`                         | Define the AWS region for the CloudWatch event listener.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `polaris.event-listener.aws-cloudwatch.synchronous-mode`                               | `false`                             | Define whether log events are sent to CloudWatch synchronously. When set to true, events are sent synchronously which may impact performance but ensures immediate delivery. When false (default), events are sent asynchronously for better performance.                                                                                                                                                                                                                                                                                                                                                                                                     |
| `polaris.event-listener.persistence-in-memory-buffer.buffer-time`                      | `5000ms`                            | The duration to buffer events in memory before flushing for the persistence event listener.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `polaris.event-listener.persistence-in-memory-buffer.max-buffer-size`                  | `5`                                 | The maximum number of events to hold in the in-memory buffer before triggering a flush.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `polaris.credential-manager.type`                                                      | `default`                           | Define the credential manager config.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

There are non Polaris configuration properties that can be useful:

| Configuration Property                               | Default Value                   | Description                                                                 |
|------------------------------------------------------|---------------------------------|-----------------------------------------------------------------------------|
| `quarkus.log.level`                                  | `INFO`                          | Define the root log level.                                                  |
| `quarkus.log.category."org.apache.polaris".level`    |                                 | Define the log level for a specific category.                               |
| `quarkus.default-locale`                             | System locale                   | Force the use of a specific locale, for instance `en_US`.                   |
| `quarkus.http.port`                                  | `8181`                          | Define the HTTP port number.                                                |
| `quarkus.http.auth.basic`                            | `false`                         | Enable the HTTP basic authentication.                                       |
| `quarkus.http.limits.max-body-size`                  | `10240K`                        | Define the HTTP max body size limit.                                        |
| `quarkus.http.cors.origins`                          |                                 | Define the HTTP CORS origins.                                               |
| `quarkus.http.cors.methods`                          | `PATCH, POST, DELETE, GET, PUT` | Define the HTTP CORS covered methods.                                       |
| `quarkus.http.cors.headers`                          | `*`                             | Define the HTTP CORS covered headers.                                       |
| `quarkus.http.cors.exposed-headers`                  | `*`                             | Define the HTTP CORS covered exposed headers.                               |
| `quarkus.http.cors.access-control-max-age`           | `PT10M`                         | Define the HTTP CORS access control max age.                                |
| `quarkus.http.cors.access-control-allow-credentials` | `true`                          | Define the HTTP CORS access control allow credentials flag.                 |
| `quarkus.management.enabled`                         | `true`                          | Enable the management server.                                               |
| `quarkus.management.port`                            | `8182`                          | Define the port number of the Polaris management server.                    |
| `quarkus.management.root-path`                       |                                 | Define the root path where `/metrics` and `/health` endpoints are based on. |
| `quarkus.otel.sdk.disabled`                          | `true`                          | Enable the OpenTelemetry layer.                                             |

{{< alert note >}}
This section is only relevant for Polaris Docker images and Kubernetes deployments.
{{< /alert >}}

There are many other actionable environment variables available in the official Polaris Docker
image; they come from the base image used by Polaris, [ubi9/openjdk-21-runtime]. They should be used
to fine-tune the Java runtime directly, e.g. to enable debugging or to set the heap size. These
variables are not specific to Polaris, but are inherited from the base image. If in doubt, leave
everything at its default!

[ubi9/openjdk-21-runtime]: https://catalog.redhat.com/software/containers/ubi9/openjdk-21-runtime/6501ce769a0d86945c422d5f

| Environment variable             | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `JAVA_OPTS` or `JAVA_OPTIONS`    | **NOT RECOMMENDED**. JVM options passed to the `java` command (example: "-verbose:class"). Setting this variable will override all options set by any of the other variables in this table. To pass extra settings, use `JAVA_OPTS_APPEND` instead.                                                                                                                                                                                                                                                                                    |
| `JAVA_OPTS_APPEND`               | User specified Java options to be appended to generated options in `JAVA_OPTS` (example: "-Dsome.property=foo").                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `JAVA_TOOL_OPTIONS`              | This variable is defined and honored by all OpenJDK distros, see [here](https://bugs.openjdk.org/browse/JDK-4971166). Options defined here take precedence over all else; using this variable is generally not necessary, but can be useful e.g. to enforce JVM startup parameters, to set up remote debug, or to define JVM agents.                                                                                                                                                                                                   |
| `JAVA_MAX_MEM_RATIO`             | Is used to calculate a default maximal heap memory based on a containers restriction. If used in a container without any memory constraints for the container then this option has no effect. If there is a memory constraint then `-XX:MaxRAMPercentage` is set to a ratio of the container available memory as set here. The default is `80` which means 80% of the available memory is used as an upper boundary. You can skip this mechanism by setting this value to `0` in which case no `-XX:MaxRAMPercentage` option is added. |
| `JAVA_DEBUG`                     | If set remote debugging will be switched on. Disabled by default (example: true").                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `JAVA_DEBUG_PORT`                | Port used for remote debugging. Defaults to "5005" (tip: use "*:5005" to enable debugging on all network interfaces).                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `GC_MIN_HEAP_FREE_RATIO`         | Minimum percentage of heap free after GC to avoid expansion. Default is 10.                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `GC_MAX_HEAP_FREE_RATIO`         | Maximum percentage of heap free after GC to avoid shrinking. Default is 20.                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `GC_TIME_RATIO`                  | Specifies the ratio of the time spent outside the garbage collection. Default is 4.                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `GC_ADAPTIVE_SIZE_POLICY_WEIGHT` | The weighting given to the current GC time versus previous GC times. Default is 90.                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `GC_METASPACE_SIZE`              | The initial metaspace size. There is no default (example: "20").                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `GC_MAX_METASPACE_SIZE`          | The maximum metaspace size. There is no default (example: "100").                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `GC_CONTAINER_OPTIONS`           | Specify Java GC to use. The value of this variable should contain the necessary JRE command-line options to specify the required GC, which will override the default of `-XX:+UseParallelGC` (example: `-XX:+UseG1GC`).                                                                                                                                                                                                                                                                                                                |
Here are some examples:

| Example                                    | `docker run` option                                                                                                 |
|--------------------------------------------|---------------------------------------------------------------------------------------------------------------------|
| Using another GC                           | `-e GC_CONTAINER_OPTIONS="-XX:+UseShenandoahGC"` lets Polaris use Shenandoah GC instead of the default parallel GC. |
| Set the Java heap size to a _fixed_ amount | `-e JAVA_OPTS_APPEND="-Xms8g -Xmx8g"` lets Polaris use a Java heap of 8g.                                           |
| Set the maximum heap percentage            | `-e JAVA_MAX_MEM_RATIO="70"` lets Polaris use 70% percent of the available memory.                                  |


## Storage Location Policies

Polaris enforces storage location constraints when namespaces and tables are created or updated. These
constraints protect data integrity and ensure that credential scoping remains predictable  for
example, preventing two tables from sharing the same storage prefix, or preventing a table's metadata
files from being written outside the location that scoped credentials cover.

All location constraints are controlled by feature flags that default to `false` (strict enforcement).
They can be relaxed at the server level via `polaris.features.*` properties, and a subset of them can
also be overridden per catalog through catalog properties set via the management API.

### Location Checks

When a table or namespace is created or its location is updated, Polaris validates the proposed
location against two constraints:

**Allowed locations.** Each catalog defines a list of allowed storage location prefixes in its storage
configuration. Every table and namespace location must fall under one of these prefixes. For tables,
this constraint is always enforced and cannot be disabled by a feature flag. For namespaces, it can
be bypassed by enabling `ALLOW_NAMESPACE_CUSTOM_LOCATION` (see **Namespace custom locations** below).

**Structured hierarchy.** By default, tables must be located within the catalog's base location and
follow the namespace hierarchy. Setting `polaris.features."ALLOW_UNSTRUCTURED_TABLE_LOCATION"` to
`true` allows tables to be placed at any location within the catalog's allowed storage locations,
regardless of whether that location falls under the parent namespace's path.

**Metadata file placement.** Iceberg metadata files must, by default, reside within the table's base
location directory. This ensures that the scoped credentials Polaris vends for a table are sufficient
to access its metadata as well. Setting `polaris.features."ALLOW_EXTERNAL_METADATA_FILE_LOCATION"` to
`true` removes this constraint. If `polaris.features."ALLOW_EXTERNAL_TABLE_LOCATION"` is already
enabled, the metadata file check is bypassed automatically.

**Namespace custom locations.** Setting `polaris.features."ALLOW_NAMESPACE_CUSTOM_LOCATION"` to `true`
allows namespaces to be created with arbitrary locations that do not fall under the catalog's base
location or allowed storage prefixes. This does not affect credential vending.

### Overlap Checks

Polaris validates that no two entities within the same parent have locations that are prefixes of each
other. For example, `s3://bucket/ns/a/` and `s3://bucket/ns/a/b/` overlap because one path is
contained within the other.

- `polaris.features."ALLOW_TABLE_LOCATION_OVERLAP"` controls whether table location overlap is
  permitted within a namespace.
- `polaris.features."ALLOW_NAMESPACE_LOCATION_OVERLAP"` controls whether namespace location overlap
  is permitted within a parent catalog or namespace.
- `polaris.features."VALIDATE_VIEW_LOCATION_OVERLAP"` controls whether view locations are included in
  the overlap check, in addition to tables and namespaces.

By default, overlap checks are performed by scanning all sibling entities and comparing their
locations. This works with any persistence backend but its cost grows with the number of entities in a
namespace.

### Optimized Overlap Check

An index-based overlap check is available as a more scalable alternative to the default full sibling
scan. When enabled, Polaris uses a database index to directly query for conflicting locations without
loading all siblings, and can detect conflicts across namespaces rather than only within the same
parent namespace.

Enabling the optimized check is a two-step process:

1. Set `polaris.features."ALLOW_OPTIMIZED_SIBLING_CHECK"` to `true` at the server level. This gate
   must be enabled first to prevent the optimized check from being turned on in deployments where the
   location index has not been fully populated  for example, after a schema migration without a data
   backfill, which would cause existing entities to be invisible to the check.

2. Set `polaris.features."OPTIMIZED_SIBLING_CHECK"` to `true` at the server level. This flag does
   not have a per-catalog override and applies uniformly across all catalogs in the realm.

{{< alert important >}}
When `OPTIMIZED_SIBLING_CHECK` is enabled, overlap detection is performed catalog-wide (across all
namespaces) rather than only within the parent namespace. The JDBC metastore uses a database index
(`idx_locations` on `location_without_scheme`, available from schema v2) for this check, scoped to
the target catalog. The in-memory metastore performs a full entity scan across all entities in the
realm  not just the target catalog  so it may report overlaps between entities in different
catalogs. On JDBC deployments still running schema v1, `hasOverlappingSiblings` cannot use the index
and falls back to the namespace-scoped listing.
{{< /alert >}}

Because the index covers the full catalog, enabling `OPTIMIZED_SIBLING_CHECK` also catches location
conflicts between entities in different namespaces. This is particularly relevant when
`ALLOW_UNSTRUCTURED_TABLE_LOCATION` is enabled and tables may be placed outside their parent
namespace's path.

### Object Storage Prefix Mode

When `polaris.features."DEFAULT_LOCATION_OBJECT_STORAGE_PREFIX_ENABLED"` is set to `true`, Polaris
automatically assigns table and view locations using a hashed sub-path prefix rather than placing them
directly under the parent namespace's path:

```
# Standard location (namespace-based):
s3://bucket/catalog_base/my_namespace/my_table/

# Object storage prefix location (hashed):
s3://bucket/catalog_base/a1b2c3d4/my_namespace/my_table/
```

The hash distributes table locations across a wider key space, which avoids object storage hot-spots
when many tables are created in a short period of time. Because hashed locations do not fall under the
parent namespace's path, this mode requires `ALLOW_UNSTRUCTURED_TABLE_LOCATION` to be enabled. The
following combinations are valid:

| `ALLOW_UNSTRUCTURED_TABLE_LOCATION` | `ALLOW_TABLE_LOCATION_OVERLAP` | `OPTIMIZED_SIBLING_CHECK` | Result |
|-------------------------------------|-------------------------------|---------------------------|--------|
| `false` | any | any | Error  unstructured mode is required for hashed paths |
| `true` | `true` | any | Valid  overlap checks are disabled |
| `true` | `false` | `false` | Error  tables may be created outside their parent namespace, but the overlap check is namespace-scoped only, leaving cross-namespace conflicts undetected |
| `true` | `false` | `true` | Valid  the index-based check enforces uniqueness across all namespaces |

### Per-Catalog Overrides

A subset of location flags can be overridden per catalog through catalog properties set via the
management API. This allows different catalogs on the same Polaris server to have different location
policies  for example, a permissive development catalog alongside strict production catalogs.

| Catalog Property | Corresponding Server Flag |
|---|---|
| `polaris.config.allow.overlapping.table.location` | `polaris.features."ALLOW_TABLE_LOCATION_OVERLAP"` |
| `polaris.config.allow.unstructured.table.location` | `polaris.features."ALLOW_UNSTRUCTURED_TABLE_LOCATION"` |
| `polaris.config.allow.external.table.location` | `polaris.features."ALLOW_EXTERNAL_TABLE_LOCATION"` |
| `polaris.config.namespace-custom-location.enabled` | `polaris.features."ALLOW_NAMESPACE_CUSTOM_LOCATION"` |
| `polaris.config.add-trailing-slash-to-location` | `polaris.features."ADD_TRAILING_SLASH_TO_LOCATION"` |
| `polaris.config.default-table-location-object-storage-prefix.enabled` | `polaris.features."DEFAULT_LOCATION_OBJECT_STORAGE_PREFIX_ENABLED"` |

Catalog-level properties take precedence over the server-level flag value for that specific catalog.
Flags without a per-catalog override  such as `ALLOW_NAMESPACE_LOCATION_OVERLAP`,
`ALLOW_EXTERNAL_METADATA_FILE_LOCATION`, `OPTIMIZED_SIBLING_CHECK`, and
`ALLOW_OPTIMIZED_SIBLING_CHECK`  can only be set at the server level and apply uniformly
across all catalogs in the realm.

All `polaris.features` flags support realm overrides through
`polaris.features.realm-overrides."MY_REALM"."<FLAG_NAME>"`.

### Configuration Examples

Realm-level `application.properties`:

```properties
polaris.features."ALLOW_UNSTRUCTURED_TABLE_LOCATION"=true
polaris.features."ADD_TRAILING_SLASH_TO_LOCATION"=true
polaris.features."OPTIMIZED_SIBLING_CHECK"=true
polaris.features."ALLOW_OPTIMIZED_SIBLING_CHECK"=true
polaris.features."ALLOW_EXTERNAL_TABLE_LOCATION"=true
polaris.features."DEFAULT_LOCATION_OBJECT_STORAGE_PREFIX_ENABLED"=false
```

Equivalent environment variables (for deployment descriptors that allow full property names):

```yaml
env:
  - name: 'polaris.features."OPTIMIZED_SIBLING_CHECK"'
    value: "true"
  - name: 'polaris.features."ALLOW_OPTIMIZED_SIBLING_CHECK"'
    value: "true"
  - name: 'polaris.features."ADD_TRAILING_SLASH_TO_LOCATION"'
    value: "true"
```

Catalog-level properties (set on the catalog via the management API):

```properties
polaris.config.allow.unstructured.table.location=true
polaris.config.default-table-location-object-storage-prefix.enabled=true
polaris.config.allow.overlapping.table.location=true
```

If you keep `polaris.config.allow.overlapping.table.location=false`, enable
`OPTIMIZED_SIBLING_CHECK` at realm-level instead.

Example realm override for optimized checks:

```properties
polaris.features.realm-overrides."MY_REALM"."OPTIMIZED_SIBLING_CHECK"=true
polaris.features.realm-overrides."MY_REALM"."ALLOW_OPTIMIZED_SIBLING_CHECK"=true
```

### Version Compatibility

The core location flags have been available since different Polaris releases. The table below
summarizes when each flag was introduced and any prerequisites that must be met before it can be
safely enabled.

| Flag | Introduced in | Prerequisites |
|---|---|---|
| `ALLOW_TABLE_LOCATION_OVERLAP` | 1.0.0 |  |
| `ALLOW_NAMESPACE_LOCATION_OVERLAP` | 1.0.0 |  |
| `ALLOW_EXTERNAL_METADATA_FILE_LOCATION` | 1.0.0 |  |
| `ALLOW_UNSTRUCTURED_TABLE_LOCATION` | 1.0.0 |  |
| `ALLOW_EXTERNAL_TABLE_LOCATION` | 1.0.0 |  |
| `ALLOW_OVERLAPPING_CATALOG_URLS` | 1.0.0 |  |
| `ADD_TRAILING_SLASH_TO_LOCATION` | 1.1.0 |  |
| `DEFAULT_LOCATION_OBJECT_STORAGE_PREFIX_ENABLED` | 1.1.0 | `ALLOW_UNSTRUCTURED_TABLE_LOCATION` must be enabled |
| `OPTIMIZED_SIBLING_CHECK` | 1.1.0 | `ALLOW_OPTIMIZED_SIBLING_CHECK` must be enabled; on JDBC metastore, requires schema v2 or later (see note below) |
| `ALLOW_OPTIMIZED_SIBLING_CHECK` | 1.2.0 | Server-level safety gate for `OPTIMIZED_SIBLING_CHECK` |
| `ALLOW_NAMESPACE_CUSTOM_LOCATION` | 1.2.0 |  |

{{< alert note >}}
`ALLOW_NAMESPACE_CUSTOM_LOCATION` was introduced as part of a breaking change in 1.2.0. Before 1.2.0,
namespaces could be created with arbitrary locations by default. The 1.2.0 release changed this default
to prohibit custom namespace locations. Set `ALLOW_NAMESPACE_CUSTOM_LOCATION` to `true` to restore
the previous behavior.
{{< /alert >}}

#### Schema Version Requirement for `OPTIMIZED_SIBLING_CHECK`

The `OPTIMIZED_SIBLING_CHECK` feature depends on a `location_without_scheme` column and a
location-based index (`idx_locations`) in the JDBC persistence schema. These were introduced in
**schema v2**, which shipped with Polaris 1.1.0. New installations from 1.1.0 onwards start on
schema v2 automatically and can enable the optimized check without any additional steps.

If you upgraded from Polaris 1.0.x to 1.1.x and stayed on schema v1, the upgrade guide requires
adding the `location_without_scheme` column manually. However, even after the column exists, the
`OPTIMIZED_SIBLING_CHECK` flag must **not** be enabled until the column has been fully backfilled for
all pre-existing entities. Without a backfill, existing entities will not appear in the location
index, and the overlap check will silently miss conflicts with them.

{{< alert important >}}
Do not enable `OPTIMIZED_SIBLING_CHECK` on a deployment that was migrated from schema v1 to v2
without a full backfill of the `location_without_scheme` column. Doing so will cause the index-based
overlap check to be unaware of all entities that existed before the migration, leading to incorrect
results.
{{< /alert >}}

## Troubleshooting Configuration Issues

If you encounter issues with the configuration, you can ask Polaris to print out the configuration it
is using. To do this, set the log level for the `io.smallrye.config` category to `DEBUG`, and also
set the console appender level to `DEBUG`:

```properties
quarkus.log.console.level=DEBUG
quarkus.log.category."io.smallrye.config".level=DEBUG
```

{{< alert important >}}
This will print out all configuration values, including sensitive ones like
passwords. Don't do this in production, and don't share this output with anyone you don't trust!
{{< /alert >}}
